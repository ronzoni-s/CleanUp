
@if (!_loaded)
{
    <MudProgressCircular Color="Color.Primary" Indeterminate="true" />
}
else
{
    <EditForm Model="Model" OnValidSubmit="SubmitAsync">
        <MudDialog>
            <TitleContent>
                @{
                    <MudText Typo="Typo.h6">
                        <MudIcon Icon="@Icons.Material.Filled.VerifiedUser" Class="mr-3 mb-n1" />
                        Modifica evento
                    </MudText>
                }
            </TitleContent>
            <DialogContent>
                <MudTextField For="@(() => Model.Id)" @bind-Value="Model.Id" Label="Id" Disabled />
                <MudTextField For="@(() => Model.Name)" @bind-Value="Model.Name" Label="Nome" />

                <MudSelect T="string" Label="Aula" AnchorOrigin="Origin.BottomCenter" @bind-Value="Model.ClassroomId">
                    @foreach (var item in classrooms)
                    {
                        <MudSelectItem Value="@item.Id">@item.Id (@item.Capacity Posti)</MudSelectItem>
                    }
                </MudSelect>

                <MudDatePicker PickerVariant="PickerVariant.Dialog" For="@(() => Model.Date)" @bind-Date="Model.Date" Label="Data" />
                <MudTimePicker Label="Ora di inizio" @bind-Time="Model.StartHour" />
                <MudTimePicker Label="Ora di fine" @bind-Time="Model.EndHour" />
            </DialogContent>
            <DialogActions>
                <MudButton Variant="Variant.Filled" OnClick="Cancel">Annulla</MudButton>
                @{
                    <MudButton Variant="Variant.Filled" ButtonType="ButtonType.Submit" Disabled="@(!Validated)" Color="Color.Success">Salva</MudButton>
                }
            </DialogActions>
        </MudDialog>
    </EditForm>
}
