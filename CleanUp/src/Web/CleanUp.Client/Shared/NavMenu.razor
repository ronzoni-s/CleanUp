@using System.Security.Claims
@using CleanUp.WebApi.Sdk.Constants.Permission

<UserCard />
<MudNavMenu>
    <MudNavLink Href="/" Match="NavLinkMatch.All" Icon="@Icons.Material.Outlined.Home">Home</MudNavLink>
    @*@if (_canViewHangfire)
    {
        <MudNavLink Href="/jobs" Target="_blank" Icon="@Icons.Material.Outlined.Work">
            @_localizer["Hangfire"]
        </MudNavLink>
    }*@

    @if (_canViewUsers)
    {
        <MudListSubheader Class="mt-2 mb-n2">Amministrazione</MudListSubheader>
        <MudNavLink Href="/users" Icon="@Icons.Material.Outlined.VerifiedUser">
            Utenti
        </MudNavLink>
    }
</MudNavMenu>

@code {
    private ClaimsPrincipal _authenticationStateProviderUser;

    private bool _canViewUsers;

    protected override async Task OnParametersSetAsync()
    {
        _authenticationStateProviderUser = await stateProvider.GetAuthenticationStateProviderUserAsync();
        //_canViewHangfire = (await authorizationService.AuthorizeAsync(_authenticationStateProviderUser, Permissions.Hangfire.View)).Succeeded;
        //_canViewOrders = (await authorizationService.AuthorizeAsync(_authenticationStateProviderUser, Permissions.Orders.View)).Succeeded;
        //_canViewProducts = (await authorizationService.AuthorizeAsync(_authenticationStateProviderUser, Permissions.Products.View)).Succeeded;
        //_vanViewReceiptEod = (await authorizationService.AuthorizeAsync(_authenticationStateProviderUser, Permissions.ReceiptEod.View)).Succeeded;
        _canViewUsers = true;
        //_canViewUsers = (await authorizationService.AuthorizeAsync(_authenticationStateProviderUser, Permissions.User.View)).Succeeded;;
    }
}